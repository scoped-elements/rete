!function(){"use strict";const e=(e,t)=>{const n=`__${t}`;let i=e.target;for(;null!==i;){const e=i[n];if(e)return void e();i=i.parentNode}},t={};function n(e){if(3!==e.nodeType){if(void 0!==e.attributes)for(let t of e.attributes){let n=t.name;if("#"===n[0])return e.removeAttribute(n),n.slice(1)}return 0}{let t=e.nodeValue;return"#"===t[0]?(e.nodeValue="",t.slice(1)):0}}const i=document.createElement("template");function r(e){const t=e[0].replace(/\n*/g,"").replace(/\s*</g,"<").replace(/>\s*/g,">");i.innerHTML=t;const r=i.content.firstChild;return r.collect=function(e){let t,i,r,o,l,c,d=!1,f="";o=l="",(c=n(e))&&(l+=`refs.${c} = node;\n`);do{!d&&(t=e.firstChild)?(d=!1,i=f,o+=`let ${f+="_f"} = ${i||"node"}.firstChild;\n`,(c=n(t))&&(l+=`refs.${c} = ${f};\n`)):(t=e.nextSibling)?(d=!1,i=f,o+=`let ${f+="_n"} = ${i||"node"}.nextSibling;\n`,(c=n(t))&&(l+=`refs.${c} = ${f};\n`)):(f="n"===f[(r=f.length)-1]?f.slice(0,f.lastIndexOf("_f_n")):f.slice(0,r-2),t=e.parentNode,d=!0),e=t}while(e);return Function("node",o+"let refs = {};\n"+l+"return refs;\n")}(r),r}function o(e,t,n,i,r,o,c){if(0===i.length)return void(t.textContent="");if(0===n.length){let e;for(let n=0,o=i.length;n<o;n++)e=r(i[n]),t.appendChild(e);return}let d,f,s,a=0,u=0,p=!0,h=n.length-1,g=i.length-1,b=c?c.nextSibling:t.firstChild,v=b,C=t.lastChild,m=C;e:for(;p;){let r;for(p=!1,d=n[a],f=i[u];d[e]===f[e];){if(o(b,f),a++,u++,v=b=b.nextSibling,h<a||g<u)break e;d=n[a],f=i[u]}for(d=n[h],f=i[g];d[e]===f[e];){if(o(C,f),h--,g--,s=C,m=C=C.previousSibling,h<a||g<u)break e;d=n[h],f=i[g]}for(d=n[h],f=i[u];d[e]===f[e];){if(p=!0,o(C,f),r=C.previousSibling,t.insertBefore(C,v),m=C=r,u++,--h<a||g<u)break e;d=n[h],f=i[u]}for(d=n[a],f=i[g];d[e]===f[e];){if(p=!0,o(b,f),r=b.nextSibling,t.insertBefore(b,s),s=m=b,b=r,g--,h<++a||g<u)break e;d=n[a],f=i[g]}}if(g<u){if(a<=h){let e;for(;a<=h;)0===h?t.removeChild(C):(e=C.previousSibling,t.removeChild(C),C=e),h--}return}if(h<a){if(u<=g){let e,n=s?1:0;for(;u<=g;)e=r(i[u]),n?t.insertBefore(e,s):t.appendChild(e),u++}return}const x=new Array(g+1-u);for(let e=u;e<=g;e++)x[e]=-1;const S=new Map;for(let t=u;t<=g;t++)S.set(i[t][e],t);let k=0,N=[];for(let t=a;t<=h;t++)S.has(n[t][e])?(x[S.get(n[t][e])]=t,k++):N.push(t);if(0===k){if(c){let e,n=c.nextSibling;for(;a<=h;)e=n.nextSibling,t.removeChild(n),n=e,a++}else t.textContent="";let e;for(let n=u;n<=g;n++)e=r(i[n]),t.appendChild(e);return}const y=function(e,t){for(var n=[],i=[],r=-1,o=new Array(e.length),c=t,d=e.length;c<d;c++){var f=e[c];if(!(f<0)){var s=l(n,f);-1!==s&&(o[c]=i[s]),s===r?(n[++r]=f,i[r]=c):f<n[s+1]&&(n[s+1]=f,i[s+1]=c)}}for(c=i[r];r>=0;c=o[c],r--)n[r]=c;return n}(x,u),$=[];let w=b;for(let e=a;e<=h;e++)$[e]=w,w=w.nextSibling;for(let e=0;e<N.length;e++)t.removeChild($[N[e]]);let B,T=y.length-1;for(let e=g;e>=u;e--)y[T]===e?(o(s=$[x[y[T]]],i[e]),T--):(-1===x[e]?B=r(i[e]):o(B=$[x[e]],i[e]),t.insertBefore(B,s),s=B)}function l(e,t){var n=-1,i=e.length;if(i>0&&e[i-1]<=t)return i-1;for(;i-n>1;){var r=Math.floor((n+i)/2);e[r]>t?i=r:n=r}return n}function c(e,t,n,i,r,o){if(0===n.length)return void(e.textContent="");if(0===t.length){let t;for(let r=0,o=n.length;r<o;r++)t=i(n[r]),e.appendChild(t);return}let l,c,f,s=0,a=0,u=!0,p=t.length-1,h=n.length-1,g=o?o.nextSibling:e.firstChild,b=g,v=e.lastChild,C=v;e:for(;u;){let i;for(u=!1,l=t[s],c=n[a];l===c;){if(r(g,c),s++,a++,b=g=g.nextSibling,p<s||h<a)break e;l=t[s],c=n[a]}for(l=t[p],c=n[h];l===c;){if(r(v,c),p--,h--,f=v,C=v=v.previousSibling,p<s||h<a)break e;l=t[p],c=n[h]}for(l=t[p],c=n[a];l===c;){if(u=!0,r(v,c),i=v.previousSibling,e.insertBefore(v,b),C=v=i,a++,--p<s||h<a)break e;l=t[p],c=n[a]}for(l=t[s],c=n[h];l===c;){if(u=!0,r(g,c),i=g.nextSibling,e.insertBefore(g,f),f=C=g,g=i,h--,p<++s||h<a)break e;l=t[s],c=n[h]}}if(h<a){if(s<=p){let t;for(;s<=p;)0===p?e.removeChild(v):(t=v.previousSibling,e.removeChild(v),v=t),p--}return}if(p<s){if(a<=h){let t,r=f?1:0;for(;a<=h;)t=i(n[a]),r?e.insertBefore(t,f):e.appendChild(t),a++}return}const m=new Array(h+1-a);for(let e=a;e<=h;e++)m[e]=-1;const x=new Map;for(let e=a;e<=h;e++)x.set(n[e],e);let S=0,k=[];for(let e=s;e<=p;e++)x.has(t[e])?(m[x.get(t[e])]=e,S++):k.push(e);if(0===S){if(o){let t,n=o.nextSibling;for(;s<=p;)t=n.nextSibling,e.removeChild(n),n=t,s++}else e.textContent="";let t;for(let r=a;r<=h;r++)t=i(n[r]),e.appendChild(t);return}const N=function(e,t){for(var n=[],i=[],r=-1,o=new Array(e.length),l=t,c=e.length;l<c;l++){var f=e[l];if(!(f<0)){var s=d(n,f);-1!==s&&(o[l]=i[s]),s===r?(n[++r]=f,i[r]=l):f<n[s+1]&&(n[s+1]=f,i[s+1]=l)}}for(l=i[r];r>=0;l=o[l],r--)n[r]=l;return n}(m,a),y=[];let $=g;for(let e=s;e<=p;e++)y[e]=$,$=$.nextSibling;for(let t=0;t<k.length;t++)e.removeChild(y[k[t]]);let w,B=N.length-1;for(let t=h;t>=a;t--)N[B]===t?(r(f=y[m[N[B]]],n[t]),B--):(-1===m[t]?w=i(n[t]):r(w=y[m[t]],n[t]),e.insertBefore(w,f),f=w)}function d(e,t){var n=-1,i=e.length;if(i>0&&e[i-1]<=t)return i-1;for(;i-n>1;){var r=Math.floor((n+i)/2);e[r]>t?i=r:n=r}return n}const f=r`<td class="TableCell">#text</td>`;function s(e){const t=f.cloneNode(!0),n=f.collect(t),{text:i}=n;i.nodeValue=e,t.__click=(()=>console.log("Click",e));let r=e;return t.update=function(e){e!==r&&(r=i.nodeValue=e)},t}const a=r`<tr></tr>`;const u=r`<table class="Table"><tbody #tbody></tbody></table>`;function p(e){const t=u.cloneNode(!0),n=u.collect(t),{tbody:i}=n;let r=[];return t.update=function(e){o("id",i,r,e.table.items,e=>(function(e){const t=a.cloneNode(!0);t.dataset.id=e.id;const n=s("#"+e.id);t.appendChild(n);let i,r,o=[];return t.update=function(e){(r=e.active?"TableRow active":"TableRow")!==i&&(i=t.className=r),c(t,o,e.props,e=>s(e),(e,t)=>e.update(t),n),o=e.props.slice()},t.update(e),t})(e),(e,t)=>e.update(t)),r=e.table.items.slice()},t.update(e),t}const h=r`<div class="AnimBox"></div>`;const g=r`<div class="Anim"></div>`;function b(e){const t=g.cloneNode(!0);let n=[];return t.update=function(e){o("id",t,n,e.anim.items,e=>(function(e){const t=h.cloneNode(!0);t.dataset.id=e.id;const n=t.style;let i,r;return t.update=function(e){(r=e.time)!==i&&(n.background="rgba(0,0,0,"+(.5+r%10/10)+")",n.borderRadius=r%10+"px",i=r)},t.update(e),t})(e),(e,t)=>e.update(t)),n=e.anim.items.slice()},t.update(e),t}const v=r`<li class="TreeLeaf">#id</li>`;const C=r`<ul class="TreeNode"></ul>`;function m(e){const t=C.cloneNode(!0);let n=[];return t.update=function(e){o("id",t,n,e.children,e=>e.container?m(e):function(e){const t=v.cloneNode(!0),n=v.collect(t),{id:i}=n;return i.nodeValue=e.id,t}(e),(e,t)=>e.update&&e.update(t)),n=e.children.slice()},t.update(e),t}const x=r`<div class="Tree"></div>`;const S=r`<div class="Main">#section</div>`;function k(){const e=S,t=S.collect(e);let{section:n}=t;function i(e,t){return"table"===e?p(t):"anim"===e?b(t):"tree"===e?function(e){const t=x.cloneNode(!0),n=m(e.tree.root);return t.appendChild(n),t.update=function(e){n.update(e.tree.root)},t}(t):void 0}let r,o,l="";return e.update=function(t){(r=t.location)!==l?(o=i(r,t),e.replaceChild(o,n),n=o,l=r):n.update(t)},e}uibench.init("stage0","0.0.2"),document.addEventListener("DOMContentLoaded",n=>{!function(n){t[n]||(document.addEventListener(n,t=>e(t,n)),t[n]=!0)}("click");const i=document.querySelector("#App"),r=k();i.appendChild(r),uibench.run(e=>r.update(e),e=>console.debug({samples:e}))})}();
//# sourceMappingURL=app.min.js.map
